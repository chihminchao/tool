#!/usr/bin/env python
import sys
import os
import ConfigParser

def usage():
    print "%s catagory.field [filename]" % sys.argv[0]

if len(sys.argv) < 2 and len(sys.argv) > 4:
    usage()
    exit(0)

catagory, field = sys.argv[1].split('.')
if not catagory or not field:
    usage()
    exit(1)

if len(sys.argv) == 2:
    config = os.getenv('HOME') + "/." + os.getenv('USER') + "-tool/config"

if os.path.exists(config):
    content = ConfigParser.SafeConfigParser()
    try:
    	content.read(config)
    except:
    	print "parse %s config error" % config
	exit(1)

    if not content.has_section(catagory):
    	print "config file doesn't have '%s' section" % catagory
	exit(1)
    val = content.get(catagory, field)
    if not val:
    	print "config file doesn't have '%s' field in '%s' section" % (field, catagory)
	exit(1)

    print val
    exit(0)
else:
    print "config directory (%s) doesn't exist" % config
    exit(2)
	
